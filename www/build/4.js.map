{"version":3,"sources":["../../src/pages/pay/pay.module.ts","../../src/pages/pay/pay.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PayPage } from './pay';\n\n@NgModule({\n  declarations: [\n    PayPage,\n  ], \n  imports: [\n    IonicPageModule.forChild(PayPage),\n  ],\n  exports: [\n    PayPage\n  ]\n})   \nexport class PayPageModule {}\n       \n\n\n// WEBPACK FOOTER //\n// ./src/pages/pay/pay.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, Nav, NavController, AlertController, LoadingOptions, LoadingController } from 'ionic-angular';\nimport { QRData } from '../../models/qrData';\nimport { Cordova } from '@ionic-native/core';\nimport { TransactionModel } from '../../providers/transactionModel';\nimport { RestAPIServiceProvider } from '../../providers/restapi-service';\nimport { AppConfig } from '../../config/app.config';\nimport { Storage } from '@ionic/storage';\n\n\n/**\n * Generated classs for the PayPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-pay',\n  templateUrl: 'pay.html',\n})\nexport class PayPage {\n\n  self = this;\n  //scannedCode =null;\n  isPaymentDone: boolean;\n\n  constructor(private userData: TransactionModel, public navCtrl: NavController,\n    public atrCtrl: AlertController, public restApiService: RestAPIServiceProvider,\n    private loadingCtrl: LoadingController, private storage: Storage) {\n  }\n\n  showConfirmAlert() {\n    let self = this;\n    let alertConfirm = self.atrCtrl.create({\n      title: 'Confirm Payment',\n      message: 'Please confirm the payment',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          handler: () => {\n            self.isPaymentDone = false;\n            console.log('No clicked');\n          }\n        },\n        {\n          text: 'Yes',\n          handler: () => {\n            self.transferAmount();\n            console.log('Yes clicked');\n          }\n        }\n      ]\n    });\n    alertConfirm.present();\n  }\n\n  redirectToHome() {\n    let self = this;\n    self.restApiService.updateBalance();\n    self.navCtrl.setRoot('HomePage');\n  }\n\n  transferAmount(): Promise<any> {\n    let self = this;\n    let transferJsonMsg = {\n      \"userId\": self.userData.loggedInUser, \"receiverUserName\": this.userData.receiverUserId,\n      \"userName\": this.userData.loggedInUser, \"walletAddress\": this.userData.loggedInUserWalletAddress,\n      \"receiverWalletAddress\": self.userData.receiverWalletAddress,\n      \"transactionType\": \"PAY\", \"uniqueTransactionId\": this.userData.transactionId,\n      \"amountToTransfer\": this.userData.amount\n    };\n    let loader = this.loadingCtrl.create({\n      content: \"Please wait...\"\n    });\n    loader.present();\n\n    return new Promise((resolve, reject) => {\n\n      if (this.userData.displayBalance < this.userData.amount) {\n        reject(\"Amount entered is less than available balance\");\n      }\n      self.restApiService.makeBackendPostRequest(AppConfig.TRANSFERAMOUNT, null, JSON.stringify(transferJsonMsg)).then((result) => {\n        let bcData = JSON.parse(result._body);\n        console.log(\"Response after Transfer PAY--::\" + bcData.data);\n        // assign the block chain user unique address to logged in user\n        if (bcData.data.transactionUniqueID != null) {\n          self.isPaymentDone = true;\n          self.userData.senderUserName = bcData.data.fromAddress;\n          self.userData.transactionDate = bcData.data.createdDateTime;\n          loader.dismiss();\n        } else {\n          console.log(\"block chain reuslt--\" + bcData);\n        }\n      }).catch(error => {\n        console.log(\"error : \" + JSON.stringify(error));\n      });\n\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pay/pay.ts"],"sourceRoot":""}